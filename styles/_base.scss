@use "mixins" as *;
@use "focus";

*,
*::before,
*::after {
    box-sizing: border-box;
    font-variant-numeric: tabular-nums;
    font-feature-settings: "kern", "liga", "clig", "calt";
    font-variation-settings:
        "opsz" var(--typography-font-opsz),
        "slnt" var(--typography-font-slnt);
}

html,
body {
    margin: 0;
    padding: 0;
}

html {
    font-size: 100%;
    -webkit-text-size-adjust: 100%;
    scroll-behavior: smooth;
    scroll-padding-block-start: var(--header-offset, 0);
    scrollbar-width: thin;
    scrollbar-color: var(--colour-primary) var(--surface-level-1);
    accent-color: var(--colour-primary);
}

body {
    background-color: var(--surface-level-0);
    color: var(--colour-text);
    transition:
        background-color var(--motion-dur-200) var(--motion-ease-standard),
        color var(--motion-dur-200) var(--motion-ease-standard);
    will-change: background-color, color;

    @include stack(null);

    min-block-size: 100vh;
    font-family: var(--typography-font-family-body);
    font-size: var(--typography-size-body);
    line-height: var(--typography-line-height-body);
    letter-spacing: var(--typography-letter-spacing-body);
    text-rendering: optimizelegibility;
    -webkit-font-smoothing: antialiased;
}

main {
    flex: 1 0 auto;

    @include stack(null);
}

@supports (font-size: clamp(1rem, 1vw, 2rem)) {
    body {
        font-size: var(--typography-size-body);
    }
}

img,
picture,
video,
canvas,
svg {
    display: block;
    max-width: 100%;
    height: auto;
}

figure {
    margin: 0;
}

:where(a:not([class])) {
    color: var(--colour-primary);
    text-decoration: underline;
    text-decoration-color: currentcolor;
    transition:
        color var(--motion-dur-200) var(--motion-ease-standard),
        text-decoration-color var(--motion-dur-200) var(--motion-ease-standard);

    &:visited {
        color: var(--colour-primary);
    }

    &:focus-visible {
        text-decoration-color: currentcolor;
    }

    @media (hover: hover) and (pointer: fine) {
        &:hover {
            color: var(--colour-primary-hover);
            text-decoration-color: currentcolor;
        }

        &:active {
            color: var(--colour-primary-active);
            text-decoration-color: currentcolor;
        }
    }
}

a {
    display: inline-flex;
    justify-content: center;
    align-items: center;
}

.footnotes a {
    text-decoration: underline;
}

a[target="_blank"]:not(.logo-link, [href$=".pdf"])::after,
button[target="_blank"]:not(.logo-link, [href$=".pdf"])::after {
    content: "";
    display: inline-block;
    inline-size: var(--size-icon-md);
    block-size: var(--size-icon-md);
    margin-inline-start: var(--space-scale-050);
    background-color: currentcolor;
    mask: url("data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%2024%2024%27%20fill%3D%27none%27%20stroke%3D%27currentColor%27%20stroke-width%3D%272%27%20stroke-linecap%3D%27round%27%20stroke-linejoin%3D%27round%27%3E%3Cpath%20stroke%3D%27none%27%20d%3D%27M0%200h24v24H0z%27%20fill%3D%27none%27/%3E%3Cpath%20d%3D%27M12%206h-6a2%202%200%200%200%20-2%202v10a2%202%200%200%200%202%202h10a2%202%200%200%200%202%20-2v-6%27/%3E%3Cpath%20d%3D%27M11%2013l9%20-9%27/%3E%3Cpath%20d%3D%27M15%204h5v5%27/%3E%3C/svg%3E")
        no-repeat center / contain;
}

a[href$=".pdf"]:not(.logo-link)::after,
button[href$=".pdf"]:not(.logo-link)::after {
    content: "";
    display: inline-block;
    inline-size: var(--size-icon-md);
    block-size: var(--size-icon-md);
    margin-inline-start: var(--space-scale-050);
    background-color: currentcolor;
    mask: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22currentColor%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Cpath%20stroke%3D%22none%22%20d%3D%22M0%200h24v24H0z%22%20fill%3D%22none%22%2F%3E%3Cpath%20d%3D%22M4%2017v2a2%202%200%200%200%202%202h12a2%202%200%200%200%202%20-2v-2%22%20%2F%3E%3Cpath%20d%3D%22M7%2011l5%205l5%20-5%22%20%2F%3E%3Cpath%20d%3D%22M12%204l0%2012%22%20%2F%3E%3C%2Fsvg%3E")
        no-repeat center / contain;
}

section {
    padding-block: var(--space-scale-400);
}

.visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip-path: inset(50%);
    white-space: nowrap;
    border: 0;
}

.skip-link {
    position: absolute;
    inset-block-start: 0;
    inset-inline-start: 0;
    padding: var(--space-scale-050);
    background: var(--colour-primary);
    color: var(--colour-on-primary);
    transform: translateY(-100%);
    z-index: var(--z-3);
}

.skip-link:focus {
    transform: translateY(0);
}

summary {
    display: flex;
    align-items: center;
    cursor: pointer;
    list-style: none;
    padding-block: var(--space-scale-050);
    padding-inline: var(--space-scale-075);
    min-block-size: var(--size-tap-min);
    border-radius: var(--radius-s);
    font-family: var(--typography-font-family-header);
}

summary::-webkit-details-marker {
    display: none;
}

summary::after {
    content: "â–¸";
    margin-inline-start: var(--space-scale-050);
    transition: transform var(--motion-dur-200) var(--motion-ease-standard);
}

details[open] summary::after {
    transform: rotate(90deg);
}

code {
    background: var(--surface-level-2);
    border-radius: var(--radius-s);
    padding: var(--space-scale-025);
    padding-inline: var(--space-scale-050);
    font-family: var(--typography-font-family-body);
    font-size: var(--typography-size-small);
    line-height: var(--typography-line-height-code);
    white-space: nowrap;
}

pre {
    font-family: var(--typography-font-family-body);
    line-height: var(--typography-line-height-code);
    padding: var(--space-scale-100);
    overflow: auto;
    border-radius: var(--radius-m);
}

@media (hover: hover) and (pointer: fine) {
    summary:hover {
        background: var(--surface-level-1-hover);
    }

    summary:active {
        background: var(--surface-level-1-active);
    }
}

:target {
    outline: var(--border-focus-ring);
    outline-offset: var(--space-focus-ring-offset);
    background: var(--surface-level-0);
}

::selection {
    background: var(--colour-primary);
    color: var(--colour-on-primary);
}

/* Scrollbar styling */
@supports selector(::-webkit-scrollbar) {
    html::-webkit-scrollbar {
        width: 0.6rem;
        height: 0.6rem;
    }

    html::-webkit-scrollbar-track {
        background: var(--surface-level-1);
    }

    html::-webkit-scrollbar-thumb {
        background: var(--colour-border);
        border-radius: var(--radius-m);
        transition: background var(--motion-dur-200) var(--motion-ease-standard);
    }

    html::-webkit-scrollbar-thumb:hover {
        background: var(--colour-primary);
    }
}

@media print {
    body {
        background: var(--surface-level-0);
        color: var(--colour-text);
    }

    nav,
    .cta-group,
    button,
    a[href^="mailto"],
    .skip-link {
        display: none !important;
    }

    a::after {
        content: " (" attr(href) ")";
    }
}

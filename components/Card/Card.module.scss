@use "../../styles/mixins" as *;

.card {
    background: var(--surface-level-1);
    border-radius: var(--radius-l);
    border: var(--border-width-s) solid var(--colour-border);
    padding: var(--space-scale-150);
    box-shadow: var(--shadow-elev-1);

    @include stack;

    color: var(--colour-text);
    will-change: box-shadow, transform, background;
    transition:
        background var(--motion-dur-200) var(--motion-ease-standard),
        box-shadow var(--motion-dur-200) var(--motion-ease-standard),
        transform var(--motion-dur-120) var(--motion-ease-emphasized);
}

.card[data-size="lg"] {
    padding: var(--space-scale-200);
}

.card[data-highlight] {
    border: var(--border-width-m) solid var(--colour-primary);
}

@media (prefers-reduced-motion: reduce) {
    .card {
        transition: none;
        transform: none;
    }
}

.head {
    @include flex-between(flex-start, var(--space-scale-075));
}

.head h2,
.head h3,
.head h4 {
    margin: 0;
    font-size: var(--typography-size-300);
}

.body {
    @include stack(null);

    flex-grow: 1;
    font-size: var(--typography-size-200);
}

.card[data-variant="link"] {
    color: inherit;
    text-decoration: none;
}

.card[data-variant="testimonial"] {
    @include centered-column;

    gap: var(--space-scale-100);

    blockquote {
        margin: 0;
        font-size: var(--typography-size-200);
    }

    figcaption {
        font-size: var(--typography-size-100);
        color: var(--colour-text);
    }
}

.card[data-variant="step"] {
    padding: var(--space-scale-100);
    padding-inline-start: calc(var(--size-icon-xl) + var(--space-scale-300));
    border-radius: var(--radius-m);
    background: var(--surface-level-2);
    position: relative;
    counter-increment: step;
    gap: 0;

    &::before {
        content: counter(step);
        position: absolute;
        inset-inline-start: var(--space-scale-100);
        inline-size: var(--size-icon-xl);
        block-size: var(--size-icon-xl);
        border-radius: var(--radius-m);
        background: var(--colour-primary);
        color: var(--colour-on-primary);
        font-weight: var(--font-weight-semibold);

        @include inline-center;
    }

    strong {
        font-family: var(--font-family-header);
        font-weight: var(--font-weight-semibold);
        line-height: var(--typography-line-tight);
    }

    p {
        margin: 0;
    }
}

.card[data-variant="link"]:focus-within,
.card[data-variant="step"]:focus-within {
    box-shadow: var(--shadow-elev-2);
    background: var(--surface-level-1-hover);
}

@media (hover: hover) and (pointer: fine) {
    .card[data-variant="link"]:hover,
    .card[data-variant="step"]:hover {
        box-shadow: var(--shadow-elev-2);
        transform: translateY(calc(var(--space-scale-025) / -4));
        background: var(--surface-level-1-hover);
    }

    .card[data-variant="link"]:active,
    .card[data-variant="step"]:active {
        box-shadow: var(--shadow-elev-3);
        transform: translateY(calc(var(--space-scale-025) / 4));
        background: var(--surface-level-1-active);
    }
}

@container section (max-width: 40rem) {
    .card {
        padding: var(--space-scale-100);
    }

    .head h2,
    .head h3,
    .head h4 {
        font-size: var(--typography-size-200);
    }
}
